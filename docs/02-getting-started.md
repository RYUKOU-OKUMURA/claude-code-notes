# Claude Code 基本的な使い方ガイド

## 目次
- [対話モードの基本](#対話モードの基本)
- [よく使うコマンド](#よく使うコマンド)
- [実践的なワークフロー](#実践的なワークフロー)
- [ファイル操作](#ファイル操作)
- [プロジェクト管理](#プロジェクト管理)
- [便利な機能](#便利な機能)

---

## 対話モードの基本

Claude Codeには主に2つの使い方があります。

### 1. 対話モード（推奨）

プロジェクトディレクトリで`claude`コマンドを実行すると、対話モードが始まります:

```bash
cd /path/to/your/project
claude
```

対話モードでは、Claudeと自由に会話しながら開発を進められます。

**対話モードの特徴:**
- 連続した会話ができる（文脈を保持）
- 複数のタスクを段階的に進められる
- コードの説明やデバッグに最適

**対話モードの終了:**
- `exit`と入力
- `Ctrl+D`（Mac/Linux）
- `Ctrl+Z`（Windows）

### 2. 単発タスクモード

対話モードに入らずに、1つのタスクだけを実行する方法:

```bash
claude "プロジェクトの構造を説明して"
```

**単発タスクモードの特徴:**
- 素早く1つの質問に答えを得られる
- スクリプトやCIパイプラインに組み込みやすい
- 文脈は保持されない

---

## よく使うコマンド

対話モード内で使える便利なコマンドです。コマンドは`/`で始まります。

### 基本コマンド

| コマンド | 説明 | 使用例 |
|---------|------|--------|
| `/help` | ヘルプを表示 | `/help` |
| `/clear` | 会話履歴をクリア | `/clear` |
| `/exit` | 対話モードを終了 | `/exit` |

### プロジェクト管理コマンド

| コマンド | 説明 | 使用例 |
|---------|------|--------|
| `/init` | CLAUDE.mdを自動生成 | `/init` |
| `/status` | 現在のプロジェクト状態を確認 | `/status` |

### 履歴管理

| 操作 | 説明 |
|------|------|
| `↑`（上矢印） | 前のコマンドを表示 |
| `↓`（下矢印） | 次のコマンドを表示 |
| `Ctrl+R` | コマンド履歴を検索 |

---

## 実践的なワークフロー

初心者が最初に試すべき、実践的なワークフローを紹介します。

### ワークフロー1: コードベースを理解する

新しいプロジェクトに参加したときに、全体像を把握する方法:

```bash
# プロジェクトディレクトリに移動
cd /path/to/project

# Claudeを起動
claude
```

対話モードで以下のように質問します:

```
このプロジェクトの概要を教えて
```

さらに詳しく知りたい場合:

```
このプロジェクトで使われている主要な技術スタックは?
```

```
プロジェクトのディレクトリ構造を説明して
```

```
エントリーポイントはどこ?
```

**ポイント:**
- 最初は広い質問から始める
- 段階的に具体的な質問をする
- 必要に応じてファイルを指定して質問する

---

### ワークフロー2: バグを修正する

エラーメッセージが表示された場合の対処方法:

**ステップ1: エラーメッセージを共有**

```
以下のエラーが発生しました:

TypeError: Cannot read property 'name' of undefined
  at getUserName (user.js:15)
```

**ステップ2: 複数の解決策を提案してもらう**

```
このエラーを修正する方法をいくつか提案して
```

**ステップ3: 最適な方法を選択して実装してもらう**

```
2番目の方法で修正して。テストも書いてください。
```

**ステップ4: 修正を確認**

```
修正内容を説明して。なぜこれで問題が解決するの?
```

---

### ワークフロー3: 新しい機能を追加する

新しい機能を段階的に実装する方法:

**ステップ1: 要件を伝える**

```
ユーザープロフィール画面に、アバター画像をアップロードする機能を追加したい
```

**ステップ2: 実装計画を確認**

```
実装の手順を教えて
```

**ステップ3: 段階的に実装**

```
まずフロントエンドのUIコンポーネントを作成して
```

```
次にバックエンドのAPI エンドポイントを作成して
```

```
最後にテストを書いて
```

**ポイント:**
- 大きなタスクは小さく分割する
- 各ステップで動作確認する
- 理解できない部分は質問する

---

### ワークフロー4: コードをリファクタリングする

既存のコードを改善する方法:

**ステップ1: 改善したいコードを指定**

```
@src/utils/auth.js を見て、改善できる点を教えて
```

**ステップ2: 提案を確認**

Claudeが提案してくれた改善点を確認します。

**ステップ3: リファクタリングを依頼**

```
1番目と3番目の提案でリファクタリングして。既存の動作は変えないで。
```

**ステップ4: テストで検証**

```
リファクタリング後もテストが通ることを確認して
```

---

## ファイル操作

Claude Codeでは、ファイルを簡単に参照・操作できます。

### ファイルを参照する: `@`記号

特定のファイルを会話に含めるには、`@`記号を使います:

```
@src/components/Header.js の役割を説明して
```

**複数のファイルを参照:**

```
@src/components/Header.js と @src/styles/header.css を見て、スタイルが正しく適用されているか確認して
```

### ディレクトリを参照する

ディレクトリ全体を参照することもできます:

```
@src/components/ にあるすべてのコンポーネントをリストアップして
```

### ファイルの作成

新しいファイルを作成するには:

```
src/utils/formatDate.js という新しいファイルを作成して。日付をフォーマットする関数を含めて。
```

### ファイルの編集

既存のファイルを編集するには:

```
@src/config.js のタイムアウト設定を30秒から60秒に変更して
```

---

## プロジェクト管理

Claude Codeでプロジェクトを効率的に管理する方法を紹介します。

### プロジェクトの初期化

新しいプロジェクトでClaude Codeを使い始める場合:

```bash
cd /path/to/new/project
claude
```

対話モードで:

```
/init
```

これにより、`CLAUDE.md`ファイルが自動生成されます。このファイルには、プロジェクト固有の設定や指示を記載できます。

詳しくは[CLAUDE.mdガイド](./03-claude-md-guide.md)を参照してください。

### よく使うコマンドを登録

開発中によく実行するコマンド（ビルド、テスト、lintなど）は、CLAUDE.mdに記載しておくと便利です:

```markdown
## よく使うコマンド

- ビルド: `npm run build`
- テスト: `npm test`
- Lint: `npm run lint`
- 開発サーバー起動: `npm run dev`
```

これにより、Claudeが自動的にこれらのコマンドを実行できるようになります:

```
ビルドを実行して
```

```
テストを実行して、失敗したテストがあれば修正して
```

---

## 便利な機能

### 1. 具体的な指示を心がける

曖昧な指示よりも、具体的な指示の方が良い結果が得られます。

**悪い例:**
```
コードをきれいにして
```

**良い例:**
```
src/utils/helper.js のコードを以下の点で改善して:
1. 関数名をより説明的にする
2. コメントを追加する
3. 重複したコードを削除する
```

### 2. 段階的に進める

複雑なタスクは、小さなステップに分割して進めます。

**悪い例:**
```
ユーザー認証システム全体を実装して
```

**良い例:**
```
まず、ユーザーログイン画面のUIを作成して
```
→ 完成したら次へ
```
次に、ログインAPIエンドポイントを作成して
```
→ 完成したら次へ
```
最後に、認証トークンを管理するミドルウェアを作成して
```

### 3. 理解できない部分は質問する

Claudeの回答や生成したコードが理解できない場合は、遠慮なく質問してください:

```
さっきのコードで、なぜasync/awaitを使っているの?
```

```
このエラーハンドリングの仕組みをもっと詳しく説明して
```

### 4. コンテキストを明確にする

プロジェクトの状況や制約を明確に伝えると、より適切な回答が得られます:

```
このプロジェクトはReact 18を使っています。最新のHooksパターンでコンポーネントを書いて。
```

```
このAPIはレートリミットがあるので、リトライ機能を含めて実装して。
```

### 5. コード規約を伝える

プロジェクト固有のコード規約がある場合は、CLAUDE.mdに記載するか、直接伝えます:

```
このプロジェクトでは、変数名はキャメルケース、定数はアッパースネークケースを使います。
```

---

## 実践例

### 例1: 既存プロジェクトの理解

```bash
# プロジェクトディレクトリに移動
cd ~/projects/my-app

# Claudeを起動
claude
```

対話モードで:

```
このプロジェクトの概要を教えて
```

```
@package.json を見て、どんな依存関係があるか説明して
```

```
src/ディレクトリの構造を説明して
```

```
@src/index.js がエントリーポイント?
```

---

### 例2: バグ修正

```bash
npm test
# テストが失敗...

claude "以下のテストが失敗しました:

FAIL  src/utils/formatDate.test.js
  ● formatDate › should format date correctly

    expect(received).toBe(expected)

    Expected: "2023-01-01"
    Received: "2023-1-1"

このテストを修正して"
```

---

### 例3: 新機能の追加

```bash
claude
```

対話モードで:

```
ユーザーがプロフィール画像をアップロードできる機能を追加したい。
フロントエンドはReact、バックエンドはNode.js/Expressです。
```

```
まず、フロントエンドのコンポーネントを作成して。
画像プレビュー機能も含めてください。
```

```
次に、バックエンドのAPIエンドポイントを作成して。
画像はS3にアップロードします。
```

```
最後に、エラーハンドリングとバリデーションを追加して。
```

---

## Tips: 効率的な使い方

### 1. セッションを分ける

長時間の作業では、タスクごとにセッションを分けると効率的です:

```bash
# バグ修正セッション
claude
# バグを修正...
exit

# 新機能追加セッション
claude
# 新機能を追加...
exit
```

### 2. 会話履歴をクリアする

会話が長くなって混乱してきたら、`/clear`でクリアします:

```
/clear
```

### 3. ショートカットキーを活用

- `Ctrl+R`: コマンド履歴を検索
- `↑`/`↓`: 前後のコマンドを表示
- `Ctrl+C`: 現在の入力をキャンセル
- `Ctrl+D`: 対話モードを終了

---

## 次のステップ

基本的な使い方を理解したら、次のガイドに進みましょう:

- [CLAUDE.mdガイド](./03-claude-md-guide.md): プロジェクト設定をカスタマイズする
- [Skillsガイド](./04-skills-guide.md): 独自のスキルを作成する
- [Tips集](./05-tips-and-tricks.md): さらに高度なテクニックを学ぶ

---

**公式ドキュメント:**
- [Common Workflows](https://code.claude.com/docs/en/common-workflows.md)
- [Interactive Mode](https://code.claude.com/docs/en/interactive-mode.md)
