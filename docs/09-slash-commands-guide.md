# Claude Code スラッシュコマンドガイド

## 目次
- [スラッシュコマンドとは](#スラッシュコマンドとは)
- [組み込みコマンド](#組み込みコマンド)
- [カスタムコマンドの作成方法](#カスタムコマンドの作成方法)
- [実践的なカスタムコマンド例](#実践的なカスタムコマンド例)
- [ベストプラクティス](#ベストプラクティス)
- [よくある質問](#よくある質問)

---

## スラッシュコマンドとは

**スラッシュコマンド**は、`/`で始まる特別なコマンドで、Claude Codeで素早く特定のタスクを実行できる機能です。

### 基本概念

スラッシュコマンドには2種類あります：

1. **組み込みコマンド**: Claude Codeにデフォルトで用意されているコマンド
2. **カスタムコマンド**: ユーザーが独自に作成できるコマンド

**イメージ:**
SlackやDiscordのスラッシュコマンドと似た仕組みです。

```
ユーザー: /deploy
  ↓
Claude Code: deployコマンドを読み込み
  ↓
Claude: コマンドの内容に従って作業を実行
```

---

## 組み込みコマンド

Claude Codeにはデフォルトで以下のコマンドが用意されています。

### 基本コマンド

| コマンド | 説明 | 使用例 |
|---------|------|--------|
| `/help` | ヘルプを表示 | `/help` |
| `/clear` | 会話履歴をクリア | `/clear` |
| `/exit` | 対話モードを終了 | `/exit` |
| `/init` | CLAUDE.mdを自動生成 | `/init` |
| `/status` | プロジェクトの状態を表示 | `/status` |

---

### /help - ヘルプの表示

利用可能なコマンドやヘルプ情報を表示します。

```
/help
```

**出力例:**
```
利用可能なコマンド:
  /help     - ヘルプを表示
  /clear    - 会話履歴をクリア
  /init     - CLAUDE.mdを作成
  /deploy   - アプリをデプロイ (カスタム)
```

---

### /clear - 会話履歴のクリア

会話履歴をクリアして、新しい会話を始めます。

```
/clear
```

**用途:**
- 会話が長くなりすぎた場合
- 別のタスクに切り替える場合
- コンテキストをリセットしたい場合

---

### /init - CLAUDE.mdの自動生成

プロジェクトの`CLAUDE.md`ファイルを自動生成します。

```
/init
```

Claudeがプロジェクトを分析して、適切な内容のCLAUDE.mdを作成してくれます。

詳しくは [CLAUDE.mdガイド](./03-claude-md-guide.md) を参照。

---

### /status - プロジェクト状態の確認

現在のプロジェクトの状態を表示します。

```
/status
```

**出力例:**
```
📊 プロジェクト状態
- ブランチ: main
- 未コミットの変更: 3ファイル
- 最終コミット: feat: Add login feature
```

---

## カスタムコマンドの作成方法

自分だけのスラッシュコマンドを作成できます。

### ステップ1: コマンドディレクトリの作成

プロジェクトのルートディレクトリで、`.claude/commands/` ディレクトリを作成します:

```bash
mkdir -p .claude/commands
```

---

### ステップ2: コマンドファイルの作成

`.claude/commands/` ディレクトリ内に、Markdownファイルを作成します:

```bash
touch .claude/commands/deploy.md
```

**ファイル名 = コマンド名:**
- `deploy.md` → `/deploy` コマンド
- `run-tests.md` → `/run-tests` コマンド
- `setup.md` → `/setup` コマンド

---

### ステップ3: コマンドの内容を記述

エディタでファイルを開き、Claudeに実行してほしい指示を記述します:

**`.claude/commands/deploy.md`:**

```markdown
# Deploy Command

アプリケーションを本番環境にデプロイします。

## 実行手順

1. テストを実行して、全て合格することを確認
2. `npm run build` でビルドを実行
3. ビルドが成功したら、`npm run deploy:prod` でデプロイ
4. デプロイ後、ヘルスチェックURLにアクセスして動作確認
5. 結果をユーザーに報告

## 注意事項

- 必ずmainブランチからデプロイすること
- デプロイ前にチームに通知すること
```

---

### ステップ4: コマンドを実行

Claude Codeの対話モード内で、作成したコマンドを実行します:

```bash
claude
```

対話モードで:

```
/deploy
```

Claudeがコマンドの内容を読み取り、指示に従って作業を進めます。

---

## 実践的なカスタムコマンド例

### 例1: テスト実行コマンド

**ファイル:** `.claude/commands/test.md`

```markdown
# Test Command

プロジェクトのテストを実行し、失敗したテストを修正します。

## 実行手順

1. `npm test` を実行
2. テスト結果を分析
3. 失敗したテストがある場合:
   - エラーメッセージを確認
   - 原因を特定
   - コードを修正
   - 再度テストを実行
   - すべてのテストが通るまで繰り返す
4. テストカバレッジを確認
5. カバレッジが80%未満の場合、新しいテストの追加を提案

## 注意事項

- テスト修正時は、既存の動作を変更しないこと
- テストが通らない場合は、理由を説明すること
```

**使い方:**
```
/test
```

---

### 例2: コードレビューコマンド

**ファイル:** `.claude/commands/review.md`

```markdown
# Review Command

最近の変更をレビューします。

## 実行手順

1. `git diff` で変更内容を確認
2. 以下の観点でコードをレビュー:
   - **パフォーマンス**: 不要な計算や重い処理はないか
   - **セキュリティ**: 脆弱性やセキュリティリスクはないか
   - **可読性**: コードが読みやすく、理解しやすいか
   - **保守性**: 将来の変更が容易か
   - **ベストプラクティス**: 言語やフレームワークの推奨パターンに従っているか
3. 問題点をリストアップ
4. 改善提案を具体的に提示
5. 重要度を3段階（高・中・低）で評価

## レビュー基準

- 🔴 高: セキュリティリスク、バグの可能性が高い
- 🟡 中: パフォーマンス問題、可読性の改善
- 🟢 低: スタイルの統一、細かいリファクタリング
```

**使い方:**
```
/review
```

---

### 例3: 新コンポーネント作成コマンド

**ファイル:** `.claude/commands/new-component.md`

```markdown
# New Component Command

新しいReactコンポーネントを作成します。

## 実行前の確認

1. ユーザーにコンポーネント名を確認（PascalCase）
2. コンポーネントの種類を確認（Page / UI Component / Feature）

## 実行手順

1. `src/components/[ComponentName]/` ディレクトリを作成
2. 以下のファイルを作成:
   - `[ComponentName].tsx` - コンポーネント本体
   - `[ComponentName].module.css` - スタイル
   - `[ComponentName].test.tsx` - テスト
   - `index.ts` - エクスポート
3. コンポーネントのボイラープレートコードを生成
4. `src/components/index.ts` に新しいコンポーネントをエクスポート追加
5. 使用例をユーザーに提示

## コンポーネントテンプレート

```tsx
import React from 'react';
import styles from './[ComponentName].module.css';

interface [ComponentName]Props {
  // Props definition
}

export const [ComponentName]: React.FC<[ComponentName]Props> = (props) => {
  return (
    <div className={styles.container}>
      {/* Component content */}
    </div>
  );
};
```

## 注意事項

- コンポーネント名は必ずPascalCase
- アクセシビリティを考慮したマークアップ
- PropTypesではなくTypeScriptの型定義を使用
```

**使い方:**
```
/new-component
```

---

### 例4: データベースマイグレーションコマンド

**ファイル:** `.claude/commands/migrate.md`

```markdown
# Migrate Command

データベースマイグレーションを作成・実行します。

## 実行前の確認

1. マイグレーションの内容をユーザーに確認
2. マイグレーション名を確認（例: add_users_table）

## 実行手順

1. `npm run migration:create [name]` でマイグレーションファイルを作成
2. 生成されたマイグレーションファイルを開く
3. `up` メソッドに変更内容を記述:
   - テーブル作成
   - カラム追加
   - インデックス追加
4. `down` メソッドにロールバック処理を記述
5. テスト環境でマイグレーションを実行: `npm run migration:run`
6. 問題がないか確認
7. ロールバックをテスト: `npm run migration:revert`
8. 再度マイグレーションを実行
9. 結果をユーザーに報告

## 注意事項

- **`down`メソッドは必ず実装すること**
- 本番環境では慎重にマイグレーションを実行
- データの損失がないか十分に確認
- バックアップを取ってから実行
```

**使い方:**
```
/migrate
```

---

### 例5: セットアップコマンド

**ファイル:** `.claude/commands/setup.md`

```markdown
# Setup Command

新しい開発者がプロジェクトをセットアップするためのコマンドです。

## 実行手順

1. 環境要件を確認:
   - Node.js v18以上
   - npm v9以上
   - PostgreSQL v14以上
2. 依存関係をインストール: `npm install`
3. 環境変数ファイルを作成:
   - `.env.example` を `.env` にコピー
   - 必要な環境変数の設定方法を説明
4. データベースのセットアップ:
   - `npm run db:create` でデータベース作成
   - `npm run db:migrate` でマイグレーション実行
   - `npm run db:seed` でシードデータ投入
5. 開発サーバーを起動: `npm run dev`
6. ブラウザで `http://localhost:3000` にアクセス
7. 動作確認
8. 次のステップをユーザーに案内:
   - CLAUDE.mdを読む
   - プロジェクト構造を理解する
   - 最初のタスクに取り組む

## トラブルシューティング

よくある問題と解決方法を提示:
- Node.jsのバージョンが古い → nvmで最新版をインストール
- ポートが使用中 → ポート番号を変更
- データベース接続エラー → 接続情報を確認
```

**使い方:**
```
/setup
```

---

## ベストプラクティス

### 1. コマンド名は分かりやすく

コマンド名は、何をするコマンドなのかが一目でわかる名前にします。

**良い例:**
- `/deploy` - デプロイ
- `/test` - テスト実行
- `/review` - コードレビュー
- `/new-component` - 新規コンポーネント作成

**悪い例:**
- `/cmd1` - 何をするか不明
- `/do-stuff` - 曖昧
- `/x` - 短すぎて意味不明

---

### 2. 手順を具体的に書く

曖昧な指示ではなく、具体的で明確な手順を記述します。

**悪い例:**
```markdown
1. テストを実行
2. 問題があれば修正
```

**良い例:**
```markdown
1. `npm test` を実行
2. テスト結果を分析し、失敗したテストをリストアップ
3. 失敗したテストごとに:
   - エラーメッセージを確認
   - 該当するコードを特定
   - 原因を分析
   - コードを修正
   - 再度テストを実行
4. すべてのテストが通るまで繰り返す
```

---

### 3. 実行前の確認を含める

ユーザーに確認が必要な情報は、実行前に聞くようにします。

```markdown
## 実行前の確認

1. デプロイ先の環境を確認（staging / production）
2. デプロイするブランチを確認
3. 影響範囲をユーザーに説明
4. 確認を得てから実行
```

---

### 4. エラーハンドリングを含める

エラーが発生した場合の対処法を記述します。

```markdown
## エラー対応

- テストが失敗した場合:
  1. エラーメッセージをユーザーに提示
  2. 原因を説明
  3. 修正方法を提案
  4. ユーザーの確認を得てから修正

- ビルドが失敗した場合:
  1. ビルドエラーを分析
  2. 依存関係の問題かコードの問題かを判断
  3. 適切な修正方法を提示
```

---

### 5. コマンドを小さく保つ

1つのコマンドは1つの責務に集中させます。複雑な作業は、複数のコマンドに分割します。

**悪い例:**
- `/do-everything` - すべてを含む巨大なコマンド

**良い例:**
- `/test` - テスト実行
- `/build` - ビルド
- `/deploy` - デプロイ
- `/test-build-deploy` - 上記を順番に実行（必要に応じて）

---

### 6. コマンドをチームで共有

コマンドファイルはGitにコミットし、チームで共有します。

```bash
git add .claude/commands/
git commit -m "feat: Add deploy command"
git push
```

---

## よくある質問

### Q: コマンドとSkillsの違いは?

**A:** 実は、ほとんど同じです！

| | Slash Commands | Skills |
|---|---|---|
| **配置場所** | `.claude/commands/` | `.claude/skills/` |
| **呼び出し方** | `/command-name` | 自然言語またはスキル名指定 |
| **用途** | 素早くコマンド実行 | より複雑なタスクの手順 |

**簡単に言うと:**
- **Slash Commands**: サクッと実行したいタスク
- **Skills**: より詳細な手順が必要なタスク

実際には、同じMarkdownファイルを両方で共有することもできます。

---

### Q: コマンドに引数を渡せる?

**A:** Markdownファイル内で、ユーザーに確認することで実現できます。

```markdown
# Deploy Command

## 実行前の確認

1. デプロイ先の環境を確認:
   - `staging`
   - `production`
2. ユーザーの選択に応じてデプロイコマンドを変更:
   - staging: `npm run deploy:staging`
   - production: `npm run deploy:prod`
```

---

### Q: コマンドの一覧を確認するには?

**A:** `/help` コマンドで確認できます。

```
/help
```

または、自然言語で:

```
利用可能なコマンドを教えて
```

---

### Q: コマンドが認識されない

**A:** 以下を確認してください:

1. **ファイルの場所が正しいか**
   ```
   .claude/commands/your-command.md
   ```

2. **ファイル名と拡張子**
   - `.md` 拡張子が必要
   - ファイル名 = コマンド名

3. **Claude Codeを再起動**
   ```bash
   exit
   claude
   ```

---

### Q: グローバルコマンドを作成できる?

**A:** はい、個人用のグローバルコマンドは `~/.config/claude/commands/` に配置できます。

```bash
mkdir -p ~/.config/claude/commands/
echo "# My Command\n..." > ~/.config/claude/commands/my-command.md
```

**優先順位:**
1. プロジェクトのコマンド (`.claude/commands/`)
2. グローバルコマンド (`~/.config/claude/commands/`)

---

### Q: コマンドの説明（description）を追加できる?

**A:** Markdownの最初の段落が、コマンドの説明として使われます。

```markdown
# Deploy Command

アプリケーションを本番環境にデプロイするコマンドです。
テスト、ビルド、デプロイを順番に実行します。

## 実行手順
...
```

`/help` で表示される説明文として使われます。

---

### Q: コマンド実行中にエラーが発生したら?

**A:** Claudeがエラーを検知し、適切に対処しようとします。

コマンドファイル内でエラーハンドリングを明示的に指定しておくと、より適切な対応が可能です:

```markdown
## エラーハンドリング

- テストが失敗した場合: 修正方法を提案してユーザーに確認
- ビルドが失敗した場合: エラーログを提示して原因を説明
- デプロイが失敗した場合: ロールバック手順を案内
```

---

## コマンドを活用した開発フロー

### フロー例: リリース準備

**1. テストを実行**
```
/test
```

**2. コードをレビュー**
```
/review
```

**3. ビルドを確認**
```
/build
```

**4. 本番環境にデプロイ**
```
/deploy
```

**5. デプロイ後の確認**
```
/health-check
```

---

## よく使うコマンドのテンプレート集

### テンプレート1: 基本的なコマンド

```markdown
# Command Name

コマンドの説明をここに書きます。

## 実行手順

1. 手順1
2. 手順2
3. 手順3

## 注意事項

- 注意点1
- 注意点2
```

---

### テンプレート2: ユーザー確認が必要なコマンド

```markdown
# Command Name

コマンドの説明

## 実行前の確認

1. ユーザーに〇〇を確認
2. ユーザーに△△を確認

## 実行手順

1. 確認した内容に基づいて処理
2. ...

## 注意事項

- ...
```

---

### テンプレート3: エラーハンドリング付きコマンド

```markdown
# Command Name

コマンドの説明

## 実行手順

1. 手順1
2. 手順2
3. 手順3

## エラーハンドリング

- エラーAの場合: 対処法A
- エラーBの場合: 対処法B

## 注意事項

- ...
```

---

## まとめ

スラッシュコマンドは、以下のような場合に有用です:

✅ **頻繁に実行するタスク**: テスト、デプロイなど
✅ **定型作業の自動化**: セットアップ、マイグレーションなど
✅ **複数ステップのタスク**: レビュー、リリース準備など
✅ **チームで共有する手順**: オンボーディング、運用手順など

**効果的な使い方:**
- 分かりやすいコマンド名
- 具体的な手順
- エラーハンドリング
- チームで共有

---

## 次のステップ

スラッシュコマンドを理解したら、他の機能も学びましょう:

- [サブエージェントガイド](./07-subagents-guide.md): 専門エージェントの活用
- [HOOKSガイド](./08-hooks-guide.md): イベント駆動の自動化
- [Skillsガイド](./04-skills-guide.md): Skillsとの使い分け
- [MCPガイド](./10-mcp-guide.md): 外部ツールとの統合

---

**参考:**
- [Claude Code 公式ドキュメント](https://code.claude.com/docs)
