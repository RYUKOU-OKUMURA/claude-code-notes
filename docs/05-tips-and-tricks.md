# Claude Code 個人開発向けTips集

## 目次
- [効率的な開発フロー](#効率的な開発フロー)
- [プロジェクト初期設定](#プロジェクト初期設定)
- [コード品質向上](#コード品質向上)
- [デバッグテクニック](#デバッグテクニック)
- [学習・理解を深める](#学習理解を深める)
- [時間節約のコツ](#時間節約のコツ)
- [コスト最適化](#コスト最適化)
- [よくあるシーン別Tips](#よくあるシーン別tips)

---

## 効率的な開発フロー

### Tip 1: タスクを小分けにする

大きなタスクは小さく分割して、段階的に進めます。

**悪い例:**
```
ECサイトを作って
```

**良い例:**
```
まず、商品一覧ページのUIを作って
```
→ 完成したら
```
次に、商品詳細ページを作って
```
→ 完成したら
```
最後に、カート機能を追加して
```

**メリット:**
- 進捗が把握しやすい
- 問題が起きても影響範囲が小さい
- 途中で方向転換しやすい

---

### Tip 2: コンテキストを明確にする

プロジェクトの状況や制約を伝えると、より適切な回答が得られます。

**例:**

```
このプロジェクトはTypeScript + React 18を使っています。
最新のHooksパターンでユーザー認証機能を実装して。
```

```
このAPIはレート制限があります（1分あたり60リクエスト）。
リトライ機能と適切なエラーハンドリングを含めて実装して。
```

---

### Tip 3: 定型作業はSkillsに登録

頻繁に行う作業はSkillsとして登録しておくと、効率が上がります。

**例:**
- 新しいコンポーネントを作成するスキル
- テストを実行して失敗を修正するスキル
- Lintエラーを自動修正するスキル
- デプロイを実行するスキル

詳しくは[Skillsガイド](./04-skills-guide.md)を参照。

---

## プロジェクト初期設定

### Tip 4: プロジェクト開始時は`/init`を実行

新しいプロジェクトを始めるときは、最初に`/init`を実行してCLAUDE.mdを作成します。

```bash
cd /path/to/new/project
claude
```

対話モードで:

```
/init
```

これにより、プロジェクト固有の設定を記録する土台ができます。

---

### Tip 5: CLAUDE.mdに「よく使うコマンド」を登録

プロジェクトで頻繁に使うコマンドをCLAUDE.mdに登録しておくと便利です。

**CLAUDE.md:**

```markdown
## よく使うコマンド

- 開発サーバー起動: `npm run dev`
- ビルド: `npm run build`
- テスト実行: `npm test`
- Lint実行: `npm run lint`
- Lintエラー自動修正: `npm run lint:fix`
- 型チェック: `npm run type-check`
```

こうしておくと、「ビルドを実行して」と指示するだけで、Claudeが適切なコマンドを実行してくれます。

---

### Tip 6: ディレクトリ構造をCLAUDE.mdに記載

プロジェクトのディレクトリ構造を記載しておくと、Claudeが適切なファイルを作成・編集してくれます。

**CLAUDE.md:**

```markdown
## ディレクトリ構造

```
src/
├── components/      # 再利用可能なUIコンポーネント
├── pages/          # ページコンポーネント
├── hooks/          # カスタムHooks
├── utils/          # ユーティリティ関数
├── services/       # APIクライアント
├── types/          # TypeScript型定義
└── tests/          # テストファイル
```
```

---

## コード品質向上

### Tip 7: コード規約をCLAUDE.mdに明記

チームやプロジェクトのコード規約を明記しておくと、一貫性のあるコードが生成されます。

**CLAUDE.md:**

```markdown
## コーディング規約

- 変数名: キャメルケース（例: `userName`）
- 関数名: 動詞で始める（例: `getUserName`）
- 定数: アッパースネークケース（例: `MAX_COUNT`）
- 1つの関数は最大50行以内
- 複雑な処理にはコメントを追加
```

---

### Tip 8: リファクタリングを依頼する

既存のコードを改善したいときは、具体的にリファクタリングを依頼します。

**例:**

```
@src/utils/helper.js を見て、以下の点で改善して:
1. 関数名をより説明的にする
2. 重複したコードを削除する
3. エッジケースのエラーハンドリングを追加する
4. ユニットテストを作成する
```

---

### Tip 9: コードレビューを依頼する

作成したコードをClaude にレビューしてもらうこともできます。

**例:**

```
@src/components/UserProfile.tsx をレビューして。
以下の観点でチェックしてください:
- パフォーマンス
- アクセシビリティ
- セキュリティ
- ベストプラクティスに従っているか
```

---

## デバッグテクニック

### Tip 10: エラーメッセージを全て共有する

エラーが発生したときは、エラーメッセージを全て共有します。

**例:**

```
以下のエラーが発生しました:

TypeError: Cannot read property 'name' of undefined
  at getUserName (src/utils/user.js:15:20)
  at UserProfile (src/components/UserProfile.tsx:42:15)

該当するコードを確認して、修正方法を提案してください。
```

---

### Tip 11: 複数の解決策を提案してもらう

問題の解決方法が分からないときは、複数の選択肢を提示してもらいます。

**例:**

```
このエラーを修正する方法を3つ提案して。
それぞれのメリット・デメリットも教えて。
```

---

### Tip 12: デバッグログを追加してもらう

問題の原因を特定するために、デバッグログを追加してもらいます。

**例:**

```
@src/services/api.js に詳細なデバッグログを追加して。
リクエストとレスポンスの内容が確認できるようにして。
```

---

## 学習・理解を深める

### Tip 13: 「なぜ」を質問する

Claudeの回答や生成したコードが理解できない場合は、「なぜ」を質問します。

**例:**

```
なぜasync/awaitを使っているの? Promiseだけではダメ?
```

```
このエラーハンドリングの仕組みをもっと詳しく説明して
```

```
なぜuseEffectの依存配列にこの変数を含めているの?
```

---

### Tip 14: コードの説明を求める

既存のコードが分からないときは、説明してもらいます。

**例:**

```
@src/hooks/useAuth.js の動作を詳しく説明して。
特に、トークンのリフレッシュ処理がどう実装されているか教えて。
```

---

### Tip 15: ベストプラクティスを学ぶ

特定の技術やパターンのベストプラクティスを教えてもらいます。

**例:**

```
React HooksでのAPI呼び出しのベストプラクティスを教えて。
具体的なコード例も含めて。
```

```
TypeScriptでの型定義のベストプラクティスは?
```

---

## 時間節約のコツ

### Tip 16: ボイラープレートコードを生成してもらう

繰り返しの多いボイラープレートコードは、Claudeに生成してもらいます。

**例:**

```
新しいReactコンポーネントを作成して:
- コンポーネント名: UserCard
- Props: name, email, avatar
- スタイルファイルも作成
- テストファイルも作成
```

---

### Tip 17: テストを自動生成してもらう

既存のコードに対するテストを生成してもらいます。

**例:**

```
@src/utils/formatDate.js に対するユニットテストを作成して。
エッジケースも含めて網羅的にテストして。
```

---

### Tip 18: ドキュメントを生成してもらう

関数やクラスのドキュメントを自動生成してもらいます。

**例:**

```
@src/services/api.js の全ての関数にJSDocコメントを追加して。
パラメータ、戻り値、例外を明記して。
```

---

## コスト最適化

Claude Codeは使用量に応じて課金されるため、コストを最適化することが重要です。

### Tip 19: セッションを適切に終了する

作業が終わったら、セッションを終了します。

```
exit
```

または `Ctrl+D` / `Ctrl+Z`

---

### Tip 20: 会話履歴をクリアする

長い会話は、文脈を保持するためにコストがかかります。必要に応じて会話をクリアします。

```
/clear
```

---

### Tip 21: 単発タスクには単発モードを使う

簡単な質問や1回限りのタスクには、対話モードではなく単発モードを使います。

```bash
claude "package.jsonの依存関係を最新バージョンに更新して"
```

---

### Tip 22: 必要最小限の情報だけを共有

ファイル全体ではなく、必要な部分だけを共有します。

**悪い例:**
```
@src/ の全てのファイルを見て、問題を探して
```

**良い例:**
```
@src/components/UserProfile.tsx の42行目でエラーが発生しています。
この部分を確認して修正してください。
```

---

## よくあるシーン別Tips

### シーン1: 新しいプロジェクトを始める

**ステップ1: プロジェクトの初期化**

```bash
mkdir my-project
cd my-project
claude
```

**ステップ2: プロジェクト構成を相談**

```
React + TypeScriptでタスク管理アプリを作りたい。
推奨されるプロジェクト構成を教えて。
```

**ステップ3: CLAUDE.mdを作成**

```
/init
```

**ステップ4: 初期ファイルを生成**

```
推奨してくれた構成でプロジェクトのスケルトンを作成して。
package.json、tsconfig.json、必要なディレクトリを含めて。
```

---

### シーン2: 既存プロジェクトを理解する

**ステップ1: 全体像を把握**

```bash
cd /path/to/existing/project
claude
```

```
このプロジェクトの概要を教えて
```

**ステップ2: 技術スタックを確認**

```
@package.json を見て、使用している主要な技術を教えて
```

**ステップ3: ディレクトリ構造を理解**

```
このプロジェクトのディレクトリ構造を説明して
```

**ステップ4: 重要なファイルを確認**

```
@src/index.ts がエントリーポイント?
どのような処理をしているか教えて。
```

---

### シーン3: 新機能を追加する

**ステップ1: 要件を明確にする**

```
ユーザーがプロフィール画像をアップロードできる機能を追加したい。
実装の手順を教えて。
```

**ステップ2: 段階的に実装**

```
まず、フロントエンドのUI（ファイル選択とプレビュー）を作成して
```

```
次に、画像をS3にアップロードするAPIエンドポイントを作成して
```

```
最後に、エラーハンドリングとバリデーションを追加して
```

**ステップ3: テストを作成**

```
今作った機能のユニットテストと統合テストを作成して
```

---

### シーン4: バグを修正する

**ステップ1: エラーを報告**

```
以下のエラーが発生しました:

[エラーメッセージをペースト]
```

**ステップ2: 原因を特定**

```
このエラーの原因を特定して。
該当するコードも教えて。
```

**ステップ3: 修正案を確認**

```
修正方法を複数提案して。
それぞれのメリット・デメリットも教えて。
```

**ステップ4: 修正を実行**

```
2番目の方法で修正して。
テストも追加してください。
```

---

### シーン5: コードレビュー

**自分のコードをレビューしてもらう:**

```
@src/components/TaskList.tsx をレビューして。
以下の観点でチェックしてください:
- パフォーマンス
- アクセシビリティ
- React のベストプラクティス
- 型の安全性
```

---

### シーン6: リファクタリング

**ステップ1: 改善点を見つける**

```
@src/utils/api.js を見て、改善できる点をリストアップして
```

**ステップ2: リファクタリングを実行**

```
提案してくれた改善点で リファクタリングして。
既存の動作は変えないで。
```

**ステップ3: テストで検証**

```
テストを実行して、すべて通ることを確認して
```

---

### シーン7: テストを書く・修正する

**新しいテストを作成:**

```
@src/services/authService.ts に対するユニットテストを作成して。
すべての関数をカバーして。
```

**失敗したテストを修正:**

```
テストを実行したら失敗しました:

[テスト結果をペースト]

失敗の原因を特定して、修正してください。
```

---

### シーン8: ドキュメントを書く

**コードにコメントを追加:**

```
@src/hooks/useAuth.ts に詳細なコメントを追加して。
使い方の例も含めて。
```

**READMEを作成:**

```
このプロジェクトのREADME.mdを作成して。
以下の項目を含めて:
- プロジェクトの概要
- インストール方法
- 使い方
- 開発環境のセットアップ
- テストの実行方法
```

---

## まとめ: 効率的に使うための心構え

### 1. 具体的に指示する

曖昧な指示ではなく、具体的で明確な指示を心がけます。

### 2. 段階的に進める

大きなタスクは小さく分割して、段階的に進めます。

### 3. 理解できない部分は質問する

分からないことは遠慮なく質問して、理解を深めます。

### 4. 定型作業は自動化する

頻繁に行う作業はSkillsやCLAUDE.mdに登録して、効率化します。

### 5. コストを意識する

必要な情報だけを共有し、セッションを適切に管理してコストを最適化します。

---

## 次のステップ

- [トラブルシューティング](./06-troubleshooting.md): 問題が発生したときの対処法
- [サンプルファイル](../examples/): 実際に使えるCLAUDE.mdやSkillsの例

---

**公式ドキュメント:**
- [Claude Code Docs](https://code.claude.com/docs)
